import{n as S,k as b,r as a,j as t,B as c,l as p,m as B}from"./index-DZBjWbXW.js";import{a as E,q as $,R as P}from"./quill.snow-Bm-oGPbc.js";/* empty css                 */const u="https://www.blogging-platform.rinkakuworks.com/backend",T=()=>{const{id:o}=S(),h=b(),r=a.useRef(null),[y,g]=a.useState(!0),[n,j]=a.useState(null),[x,i]=a.useState(""),[m,l]=a.useState(""),[f,d]=a.useState("");a.useEffect(()=>{E()},[]);const v=a.useMemo(()=>$(r),[r]);if(a.useEffect(()=>{o&&(async()=>{g(!0);try{const s=await p.get(`${u}/api/blog/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});i(s.data.title),l(s.data.content),d(s.data.author)}catch(s){console.error("Error fetching blog post",s)}finally{g(!1)}})()},[o]),y)return t.jsx("div",{children:"Loading..."});const w=async()=>{try{const e=await p.put(`${u}/api/blog/${o}`,{title:x,content:m,author:f},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});await B(),j(e.data),h("/platform")}catch(e){console.error("Error editing post",e)}},k=()=>{n&&(i(n.title),l(n.content),d(n.author))},C=async()=>{try{await p.delete(`${u}/api/blog/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),h("/platform")}catch(e){console.error("Error deleting post",e)}};return t.jsxs("div",{style:{maxWidth:"800px",margin:"50px auto"},children:[t.jsx("h3",{children:"Edit Current Post"}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Title:"}),t.jsx("input",{type:"text",value:x,onChange:e=>i(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"5px"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Content:"}),t.jsx(P,{ref:r,value:m,onChange:l,style:{height:"300px"},modules:v})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Author:"}),t.jsx("input",{type:"text",value:f,onChange:e=>d(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"50px"}})]}),t.jsx(c,{onClick:w,style:{margin:"50px 20px",padding:"10px 20px"},children:"Save Changes"}),t.jsx(c,{onClick:k,variant:"secondary",style:{margin:"50px 20px",padding:"10px 20px"},children:"Revert Changes"}),t.jsx(c,{variant:"danger",style:{margin:"50px 20px",padding:"10px 20px"},onClick:()=>{window.confirm("Are you sure you want to delete the current post?")&&C()},children:"Delete Post"})]})};export{T as default};
