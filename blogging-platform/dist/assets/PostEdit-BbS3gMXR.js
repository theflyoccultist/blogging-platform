import{n as B,k as E,r as a,j as t,B as c,l as p,m as $}from"./index-DfpqE6C5.js";import{q as A,a as P,R}from"./quill.snow-CgNlAh49.js";/* empty css                 */const u="https://www.blogging-platform.rinkakuworks.com/backend",L=()=>{const{id:n}=B(),x=E(),r=a.useRef(null),[v,h]=a.useState(!0),[s,b]=a.useState(null),[g,i]=a.useState(""),[m,f]=a.useState(""),[y,l]=a.useState(""),[j,d]=a.useState(""),w=a.useMemo(()=>A(r),[r]);if(a.useEffect(()=>{n&&(async()=>{h(!0);try{const o=await p.get(`${u}/api/blog/${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});i(o.data.title),f(o.data.thumbnail),l(o.data.content),d(o.data.author)}catch(o){console.error("Error fetching blog post",o)}finally{h(!1)}})()},[n]),a.useEffect(()=>{P()},[]),v)return t.jsx("div",{children:"Loading..."});const S=async()=>{try{await $();const e=await p.put(`${u}/api/blog/${n}`,{title:g,thumbnail:m,content:y,author:j},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});b(e.data),x("/platform")}catch(e){console.error("Error editing post",e)}},C=()=>{s&&(i(s.title),l(s.content),d(s.author))},k=async()=>{try{await p.delete(`${u}/api/blog/${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),x("/platform")}catch(e){console.error("Error deleting post",e)}};return t.jsxs("div",{style:{maxWidth:"800px",margin:"50px auto"},children:[t.jsx("h3",{children:"Edit Current Post"}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Title:"}),t.jsx("br",{}),t.jsx("input",{type:"text",value:g,onChange:e=>i(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"5px"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Thumbnail:"}),t.jsx("br",{}),t.jsx("div",{className:"mb-2 text-muted",children:"Add your image URL here"}),t.jsx("input",{type:"text",value:m,onChange:e=>f(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"5px"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Content:"}),t.jsx(R,{ref:r,value:y,onChange:l,style:{height:"300px"},modules:w})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Author:"}),t.jsx("input",{type:"text",value:j,onChange:e=>d(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"50px"}})]}),t.jsx(c,{onClick:S,style:{margin:"50px 20px",padding:"10px 20px"},children:"Save Changes"}),t.jsx(c,{onClick:C,variant:"secondary",style:{margin:"50px 20px",padding:"10px 20px"},children:"Revert Changes"}),t.jsx(c,{variant:"danger",style:{margin:"50px 20px",padding:"10px 20px"},onClick:()=>{window.confirm("Are you sure you want to delete the current post?")&&k()},children:"Delete Post"})]})};export{L as default};
