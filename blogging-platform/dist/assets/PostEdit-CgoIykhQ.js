import{m as k,k as b,r as a,j as t,B as c,l as p}from"./index-BbW1ohmA.js";import{a as B,q as E,R as $}from"./quill.snow-CEsWv9C7.js";/* empty css                 */const u="https://www.blogging-platform.rinkakuworks.com/backend",A=()=>{const{id:o}=k(),g=b(),r=a.useRef(null),[y,x]=a.useState(!0),[n,j]=a.useState(null),[h,i]=a.useState(""),[m,l]=a.useState(""),[f,d]=a.useState("");a.useEffect(()=>{B()},[]);const v=a.useMemo(()=>E(r),[r]);if(a.useEffect(()=>{o&&(async()=>{x(!0);try{const s=await p.get(`${u}/api/blog/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});i(s.data.title),l(s.data.content),d(s.data.author)}catch(s){console.error("Error fetching blog post",s)}finally{x(!1)}})()},[o]),y)return t.jsx("div",{children:"Loading..."});const w=async()=>{try{const e=await p.put(`${u}/api/blog/${o}`,{title:h,content:m,author:f},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});j(e.data),g("/platform")}catch(e){console.error("Error editing post",e)}},C=()=>{n&&(i(n.title),l(n.content),d(n.author))},S=async()=>{try{await p.delete(`${u}/api/blog/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),g("/platform")}catch(e){console.error("Error deleting post",e)}};return t.jsxs("div",{style:{maxWidth:"800px",margin:"50px auto"},children:[t.jsx("h3",{children:"Edit Current Post"}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Title:"}),t.jsx("input",{type:"text",value:h,onChange:e=>i(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"5px"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Content:"}),t.jsx($,{ref:r,value:m,onChange:l,style:{height:"300px"},modules:v})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Author:"}),t.jsx("input",{type:"text",value:f,onChange:e=>d(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"50px"}})]}),t.jsx(c,{onClick:w,style:{margin:"50px 20px",padding:"10px 20px"},children:"Save Changes"}),t.jsx(c,{onClick:C,variant:"secondary",style:{margin:"50px 20px",padding:"10px 20px"},children:"Revert Changes"}),t.jsx(c,{variant:"danger",style:{margin:"50px 20px",padding:"10px 20px"},onClick:()=>{window.confirm("Are you sure you want to delete the current post?")&&S()},children:"Delete Post"})]})};export{A as default};
