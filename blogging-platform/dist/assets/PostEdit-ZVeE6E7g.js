import{n as C,k as E,r as a,j as t,B as d,l as c,m as p}from"./index-CeVDVpMX.js";import{E as B}from"./Editor-CC5u8dcE.js";/* empty css                 */const x="https://www.blogging-platform.rinkakuworks.com/backend",T=()=>{const{id:o}=C(),h=E(),[v,g]=a.useState(!0),[r,b]=a.useState(null),[u,s]=a.useState(""),[m,y]=a.useState(""),[j,i]=a.useState(""),[f,l]=a.useState("");if(a.useEffect(()=>{o&&(async()=>{g(!0);try{const n=await c.get(`${x}/api/blog/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s(n.data.title),y(n.data.thumbnail),i(n.data.content),l(n.data.author)}catch(n){console.error("Error fetching blog post",n)}finally{g(!1)}})()},[o]),v)return t.jsx("div",{children:"Loading..."});const w=async()=>{try{await p();const e=await c.put(`${x}/api/blog/${o}`,{title:u,thumbnail:m,content:j,author:f},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});b(e.data),h("/platform")}catch(e){console.error("Error editing post",e)}},S=async()=>{r&&(await p(),s(r.title),i(r.content),l(r.author))},k=async()=>{try{await p(),await c.delete(`${x}/api/blog/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),h("/platform")}catch(e){console.error("Error deleting post",e)}};return t.jsxs("div",{style:{maxWidth:"800px",margin:"50px auto"},children:[t.jsx("h3",{children:"Edit Current Post"}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Title:"}),t.jsx("br",{}),t.jsx("input",{type:"text",value:u,onChange:e=>s(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"5px"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Thumbnail:"}),t.jsx("br",{}),t.jsx("div",{className:"mb-2 text-muted",children:"Add your image URL here"}),t.jsx("input",{type:"text",value:m,onChange:e=>y(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"5px"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Content:"}),t.jsx(B,{value:j,handleChange:i})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Author:"}),t.jsx("input",{type:"text",value:f,onChange:e=>l(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"50px"}})]}),t.jsx(d,{onClick:w,style:{margin:"50px 20px",padding:"10px 20px"},children:"Save Changes"}),t.jsx(d,{onClick:S,variant:"secondary",style:{margin:"50px 20px",padding:"10px 20px"},children:"Revert Changes"}),t.jsx(d,{variant:"danger",style:{margin:"50px 20px",padding:"10px 20px"},onClick:()=>{window.confirm("Are you sure you want to delete the current post?")&&k()},children:"Delete Post"})]})};export{T as default};
