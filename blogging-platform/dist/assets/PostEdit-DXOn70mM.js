import{n as k,k as C,r as a,j as t,B as d,l as c,m as E}from"./index-CrREwKdg.js";import{E as B}from"./Editor-DGvntPUf.js";/* empty css                 */const p="https://www.blogging-platform.rinkakuworks.com/backend",T=()=>{const{id:o}=k(),x=C(),[f,h]=a.useState(!0),[r,v]=a.useState(null),[g,s]=a.useState(""),[u,m]=a.useState(""),[y,i]=a.useState(""),[j,l]=a.useState("");if(a.useEffect(()=>{o&&(async()=>{h(!0);try{const n=await c.get(`${p}/api/blog/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s(n.data.title),m(n.data.thumbnail),i(n.data.content),l(n.data.author)}catch(n){console.error("Error fetching blog post",n)}finally{h(!1)}})()},[o]),f)return t.jsx("div",{children:"Loading..."});const b=async()=>{try{await E();const e=await c.put(`${p}/api/blog/${o}`,{title:g,thumbnail:u,content:y,author:j},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});v(e.data),x("/platform")}catch(e){console.error("Error editing post",e)}},w=()=>{r&&(s(r.title),i(r.content),l(r.author))},S=async()=>{try{await c.delete(`${p}/api/blog/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),x("/platform")}catch(e){console.error("Error deleting post",e)}};return t.jsxs("div",{style:{maxWidth:"800px",margin:"50px auto"},children:[t.jsx("h3",{children:"Edit Current Post"}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Title:"}),t.jsx("br",{}),t.jsx("input",{type:"text",value:g,onChange:e=>s(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"5px"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Thumbnail:"}),t.jsx("br",{}),t.jsx("div",{className:"mb-2 text-muted",children:"Add your image URL here"}),t.jsx("input",{type:"text",value:u,onChange:e=>m(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"5px"}})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("label",{children:"Content:"}),t.jsx(B,{value:y,handleChange:i})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Author:"}),t.jsx("input",{type:"text",value:j,onChange:e=>l(e.target.value),style:{width:"100%",padding:"10px",fontSize:"18px",marginTop:"50px"}})]}),t.jsx(d,{onClick:b,style:{margin:"50px 20px",padding:"10px 20px"},children:"Save Changes"}),t.jsx(d,{onClick:w,variant:"secondary",style:{margin:"50px 20px",padding:"10px 20px"},children:"Revert Changes"}),t.jsx(d,{variant:"danger",style:{margin:"50px 20px",padding:"10px 20px"},onClick:()=>{window.confirm("Are you sure you want to delete the current post?")&&S()},children:"Delete Post"})]})};export{T as default};
